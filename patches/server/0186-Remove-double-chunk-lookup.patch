From 4cbaa3cee1761c7bd5e7d06a5a4c19d3da7d1a57 Mon Sep 17 00:00:00 2001
From: Max <Max@DESKTOP-GEPHL93>
Date: Tue, 21 Apr 2020 04:10:32 -0400
Subject: [PATCH] Remove double chunk lookup.


diff --git a/src/main/java/org/spigotmc/ActivationRange.java b/src/main/java/org/spigotmc/ActivationRange.java
index d3767d2a..82416a53 100644
--- a/src/main/java/org/spigotmc/ActivationRange.java
+++ b/src/main/java/org/spigotmc/ActivationRange.java
@@ -128,9 +128,11 @@ public class ActivationRange
             {
                 for ( int j1 = k; j1 <= l; ++j1 )
                 {
-                    if ( world.getWorld().isChunkLoaded( i1, j1 ) )
+                    Chunk chunk = world.getChunkIfLoaded( i1, j1 ); // SportPaper - remove double chunk lookup
+
+                    if ( chunk != null )
                     {
-                        activateChunkEntities( world.getChunkAt( i1, j1 ) );
+                        activateChunkEntities( chunk );
                     }
                 }
             }
-- 
2.25.0.windows.1

